<style>
body{
background-color: #3b5998;
}
</style>


<link href="https://fonts.googleapis.com/css?family=Baloo+Tamma|Jura:400,600" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

<link href="https://fonts.googleapis.com/css?family=Domine" rel="stylesheet">
<div class="head">
 <a span class='logout' href='/'>Logout</a>
  <h2>Ellie's Jobs</h2>
</div>
<!-- Button for Modal -->
<div ng-controller="JobsController"></div>

<button id="addJob" type="button" class="btn btn-default" data-toggle="modal" data-target="#userModal">Add Job</button>
<!--   </body> -->
 <!-- Setting up the Job Table -->
  <table class="table table-striped">
    <tr>
      <th class="clickable" ng-click="sortBy('fav')">
        Favorite
        <span class="sortorder" ng-show="propertyName === 'fav'" ng-class="{reverse: reverse}"></span>
      </th>
      <th class="clickable" ng-click="sortBy('company')">
        Company
        <span class="sortorder" ng-show="propertyName === 'company'" ng-class="{reverse: reverse}"></span>
      </th>
      <th class="clickable" ng-click="sortBy('position')">
        Position
        <span class="sortorder" ng-show="propertyName === 'position'" ng-class="{reverse: reverse}"></span>
      </th>
      <th class="clickable" ng-click="sortBy('deadline')">
        Deadline
        <span class="sortorder" ng-show="propertyName === 'deadline'" ng-class="{reverse: reverse}"></span>
      </th>
      <th class="clickable" ng-click="sortBy('statusOrder')">
        Status
        <span class="sortorder" ng-show="propertyName === 'statusOrder'" ng-class="{reverse: reverse}"></span>
      </th>
      <th>Link</th>
      <th>Delete</th>
      <th>Edit</th>
      <th class="clickable" ng-click="sortBy('modifiedAt')">
        Last Modified
        <span class="sortorder" ng-show="propertyName === 'modifiedAt'" ng-class="{reverse: reverse}"></span>
      </th>
    </tr>
    <!-- Sorts by clicked item first, and company name second -->
    <tr ng-repeat="job in data.jobs | orderBy:'company':reverse | orderBy:propertyName:reverse">
      <td><span class="clickable fav" ng-class="{'glyphicon glyphicon-star': job.fav, 'glyphicon glyphicon-star-empty': !job.fav}" ng-click="toggleFav(job)"/></td>
      <td>{{job.company}}</td>
      <td>{{job.position}}</td>
      <td ng-class="getDeadlineClass({{job.deadline | amDifference : null : 'days'}})">
          {{
            (job.deadline | amDifference : null : 'days') < 0 ?
            'Completed' :
            (job.deadline | amDateFormat:'L')
          }}
      </td>
      <td>
        <span class="glyphicon glyphicon-triangle-left" ng-class="getArrowClass(job, 'left')" ng-click="adjustStatus(job, -1)" style="float:left">&thinsp;</span>
        <span class="glyphicon glyphicon-triangle-right" ng-class="getArrowClass(job, 'right')" ng-click="adjustStatus(job, 1)" style="float:right"/>
        <span><uib-progressbar class="progress active" value="progression[job.status].value" type="{{progression[job.status].type}}"/></span>
        {{job.status}}
      </td>
      <td ng-switch="!!job.link">
        <!-- Uses ng-switch to show either a blue clickable link, or grey unclickable link, depending on if job.link exists -->
        <a ng-href="{{job.link}}" ng-switch-when="true"><span class="clickable joblink glyphicon glyphicon-link"/></a>
        <span ng-switch-when="false" class="nojoblink glyphicon glyphicon-link"/></span>
      </td>
      <td><span class="clickable glyphicon glyphicon-remove" style="color:red" ng-click="delJob(job)"/></td>
       <td><span class="clickable glyphicon glyphicon-pencil" style="color:black" data-toggle="modal" ng-click="editModal(job)"/></td>
      <td>{{job.modifiedAt | amCalendar:referenceTime:formats}}</td>
    </tr>
</table>





                      <!-- MODALS BEGIN HERE -->



<!-- ADD MODAL -->
<!-- Modal Settings -->

<div class="modal fade" id="userModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
<div class="modal-dialog" role="document">
  <div class="modal-content">
  <!-- Popup Modal Header -->
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <h4 class="modal-title" id="modalLabel">Message</h4>
    </div>
  <!-- End of Header -->
  <!-- Popup Modal Body -->
      <div class="modal-body">
        <form name = gitHiredForm ng-submit="postJob()" novalidate>
        <!-- Company Form Group -->
          <div class="form-group">
            <label for="user-company" class="control-label">
            Company:
            </label>
            <input type="text" name='jobCompany' class="form-control" ng-model="job.company" placeholder="company" required>
             <div role="alert">
              <span ng-show="gitHiredForm.jobCompany.$error.required" style="color:maroon" role="alert">
               Required!</span>
            </div>
          </div>
        <!-- Position Form Group -->
          <div class ="form-group">
            <label for="user-position" class="control-label">Position:</label>
            <input name='position' class="form-control" ng-model="job.position" placeholder="position" > <!-- Input for the job.position -->
          </div>
          <div class ="form-group">
            <label for="user-deadline" class="control-label">Deadline:</label> <!-- Deadline Form Group -->
             <div class="input-group date" data-provide="datepicker">
              <input name='deadline' class="form-control" ng-model="job.deadline" placeholder="mm/dd/yyyy">
              <div class="input-group-addon">
                <span class="glyphicon glyphicon-th"> </span>
              </div>
            </div>
          </div>
          <div class ="form-group">
            <label for="user-position" class="control-label">Link:</label>
            <input name='link' class="form-control" ng-model="job.link" placeholder="link" > <!-- Input for the job.position -->
          </div>
          <br>
          <!-- Status Form Group -->
          <div class ="select form-group">
              <label for="user-status" class="control-label">Status:</label>
              <!-- Creating a Select dropdown for Starting,WIP and Completed -->

              <select name='job' class="select form-control" id="user-status"
                ng-init="job.status = 'Interested'" ng-model="job.status"
                ng-options="option.label as option.label for option in progressionArr"
              />
        <!-- End of Body -->
        <!-- Popup Modal Footer -->
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="submit" value ="listing" class="btn btn-primary" data-dismiss="modal" ng-click="closeAdder()" ng-disabled="(gitHiredForm.$dirty && gitHiredForm.$invalid)">Save</button>
            </div>
        <!-- End of Footer -->
          </div>
        </form>
        <!-- End of Form//-->
      </div>
    </div>
  </div>
</div>
<!-- END ADD MODAL -->



<!-- EDIT MODAL -->

<script type="text/ng-template" id="editModal.html">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" ng-click="closeEditor()">&times;</span></button>
      <h4 class="modal-title" id="modalLabel">Message</h4>
    </div>
  <!-- End of Header -->
  <!-- Popup Modal Body -->
      <div class="modal-body">
        <form name = gitHiredForm ng-submit="editJob(job)" novalidate>
        <!-- Company Form Group -->
          <div class="form-group">
            <label for="user-company" class="control-label">
            Company:
            </label>
            <input type="text" name='jobCompany' class="form-control" ng-model="job.company" placeholder="{{job.company}}" required>
             <div role="alert">
              <span ng-show="gitHiredForm.jobCompany.$error.required" style="color:maroon" role="alert">
               Required!</span>
            </div>
          </div>
        <!-- Position Form Group -->
          <div class ="form-group">
            <label for="user-position" class="control-label">Position:</label>
            <input name='job' class="form-control" ng-model="job.position" placeholder="position" > <!-- Input for the job.position -->
          </div>
          <div class ="form-group">
            <label for="user-deadline" class="control-label">Deadline:</label> <!-- Deadline Form Group -->
             <div class="input-group date" data-provide="datepicker">
              <input name='job' class="form-control" ng-model="job.deadline" placeholder="mm/dd/yyyy">
              <div class="input-group-addon">
                <span class="glyphicon glyphicon-th"> </span>
              </div>
            </div>
          </div>
          <div class ="form-group">
            <label for="user-position" class="control-label">Link:</label>
            <input name='link' class="form-control" ng-model="job.link" placeholder="link" > <!-- Input for the job.position -->
          </div>
          <br>
          <!-- Status Form Group -->
          <div class ="select form-group">
              <label for="user-status" class="control-label">Status:</label>
              <!-- Creating a Select dropdown for Starting,WIP and Completed -->
              <select name='job' class="select form-control" id="user-status"
                ng-model="job.status"
                ng-options="option.label as option.label for option in progressionArr"
              />
        <!-- End of Body -->
        <!-- Popup Modal Footer -->
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="closeEditor()">Close</button>
              <button type="submit" value ="listing" class="btn btn-primary" data-dismiss="modal" ng-click="closeEditor()" ng-disabled="(gitHiredForm.$dirty && gitHiredForm.$invalid)">Save</button>
            </div>
        <!-- End of Footer -->
          </div>
        </form>
        <!-- End of Form//-->
      </div>
</script>
<!-- END EDIT MODAL -->

<!-- End controller div -->
</div>
